set-option -g prefix C-j
unbind-key C-b
bind C-j send-prefix

# screen color
set-option -g default-terminal "xterm-256color"
set-option -sa terminal-overrides ',xterm-256color:RGB'

# focus-events for nvim
set-option -g focus-events on

# Keybindings
setw -g mode-keys vi
bind-key h select-pane -L
bind-key j select-pane -D
bind-key k select-pane -U
bind-key l select-pane -R
bind-key : command-prompt
bind-key r refresh-client
bind-key r source-file ~/.tmux.conf

# keybinding for toggling panes synchronization:
bind-key = set-window-option synchronize-panes

# bind change pane size key
bind -r H resize-pane -L 1
bind -r J resize-pane -D 1
bind -r K resize-pane -U 1
bind -r L resize-pane -R 1

# Set Options
set-option -g history-limit 10000
set-option -g escape-time 0

# clipboard
bind-key -T copy-mode-vi y send-keys -X copy-pipe-and-cancel "xclip -i -sel clip > /dev/null"
bind-key -T copy-mode-vi Enter send-keys -X copy-pipe-and-cancel "xclip -i -sel clip > /dev/null"

# tpm
set -g @tpm_plugins '                   \
        tmux-plugins/tpm                \
        tmux-plugins/tmux-resurrect'
set -g @plugin 'tmux-plugins/tpm'
run '~/.tmux/plugins/tpm/tpm'

# plugins
set -g @plugin 'tmux-plugins/tmux-resurrect'
set -g @plugin 'tmux-plugins/tmux-continuum'
set -g @plugin 'thewtex/tmux-mem-cpu-load'

# set zsh as default shell
if-shell "uname | grep -q Darwin" \
    "set-option -g default-shell \"/opt/homebrew/bin/zsh\"" \
    "set-option -g default-shell \"/usr/bin/zsh\"" 

# set status bar
set-option -g status-interval 1
set-option -g status-style fg=#ff8e52,bg=black
set-option -g status-position top
set-option -g status-left-length 90
set-option -g status-right-length 90
set-option -g status-justify absolute-centre
set-option -g status-left '#[bold,reverse]âš¡#{session_name} #[default] #H:[#P] '
set-option -g status-left-style bright
if-shell "uname | grep -q Darwin" \
    "set-option -g status-right '#[fg=green]#($TMUX_PLUGIN_MANAGER_PATH/tmux-mem-cpu-load/tmux-mem-cpu-load --interval 5 -g 0 -a 1) #[default]#(wifi) #(battery --tmux) [%Y-%m-%d(%a) %H:%M:%S]'" \
    "set-option -g status-right '#[fg=green]#($TMUX_PLUGIN_MANAGER_PATH/tmux-mem-cpu-load/tmux-mem-cpu-load --interval 5 -g 0 -a 1) #[default][%Y-%m-%d(%a) %H:%M:%S]'"

# restore settings
set -g @resurrect-strategy-vim 'session'
set -g @continuum-boot 'on'
set -g @continuum-restore 'on'

# aggressive-resize 
setw -g aggressive-resize on
